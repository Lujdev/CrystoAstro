---
import { RateTabs } from "../components/rates/RateTabs";
import BaseLayout from "../layouts/BaseLayout.astro";
import { fetchRates } from "../lib/api";

import type { Rate } from "../types/rates";

let rates: Rate[] = [];
try {
  rates = await fetchRates();
} catch (error) {
  console.error("Error fetching rates:", error);
}
---

<BaseLayout
  title="CrystoWeb - Cotización del Dólar en Venezuela"
  description="Consulta el precio del dólar en Venezuela hoy. Tasa BCV, Binance P2P y casas de cambio. Calculadora de conversión bolívares a dólares actualizada."
>
  <main class="w-full px-6 sm:px-8 lg:px-12 py-8">
    <div class="text-center space-y-4 mb-12">
      <h1
        class="text-3xl sm:text-4xl font-bold tracking-tight text-slate-900 dark:text-white"
      >
        Cotización del Dólar en Venezuela
      </h1>
      <p class="text-slate-500 dark:text-slate-400 text-sm sm:text-base">
        Actualizado en tiempo real - BCV, Binance P2P y más
      </p>
    </div>

    <RateTabs rates={rates} client:load />
  </main>
</BaseLayout>
